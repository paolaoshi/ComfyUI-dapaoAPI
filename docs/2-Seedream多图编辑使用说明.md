# Seedream 4.0 多图编辑节点使用说明

## 📖 节点简介

Seedream 4.0 多图编辑节点是功能强大的图像编辑工具，支持多图混合、图像修复、风格迁移等8种编辑模式。

## 🎯 主要功能

- ✅ 8种专业编辑模式
- ✅ 支持最多8张图片输入
- ✅ 主图智能指定
- ✅ 批量生成（1-4张）
- ✅ 混合模式控制
- ✅ 编辑强度调节
- ✅ 种子控制（固定/随机/递增）

## 📝 参数说明

### 必填参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| **编辑模式 (edit_mode)** | DROPDOWN | 选择编辑类型 |
| **提示词 (prompt)** | STRING | 描述编辑意图 |
| **主图 (image_main)** | IMAGE | 主要编辑对象 |
| **API Key** | STRING | Seedream API 密钥 |
| **端点 ID (endpoint_id)** | STRING | Seedream 模型端点ID |

### 可选参数

| 参数名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| **附加图片1-7** | IMAGE | 无 | 辅助参考图片 |
| **负向提示词 (negative_prompt)** | STRING | 空 | 避免出现的元素 |
| **批量生成 (batch_count)** | INT | 1 | 生成数量（1-4） |
| **编辑强度 (edit_strength)** | FLOAT | 0.75 | 编辑程度（0.0-1.0） |
| **主图指定 (main_image_index)** | INT | 1 | 指定哪张图为主图（1-8） |
| **混合模式 (blend_mode)** | DROPDOWN | 智能混合 | 多图混合方式 |
| **处理顺序 (process_order)** | DROPDOWN | 顺序处理 | 多图处理顺序 |
| **种子控制 (seed_control)** | DROPDOWN | 随机 | 种子生成方式 |
| **种子值 (seed)** | INT | 0 | 固定种子值 |
| **推理步数 (steps)** | INT | 20 | 生成步数（1-50） |
| **引导系数 (cfg_scale)** | FLOAT | 7.0 | 提示词引导强度 |

## 🎨 8种编辑模式详解

### 1. **即梦 (Mural)**
**用途**：多图组合创作，智能混合多张图片  
**适用场景**：创意合成、概念设计  
**图片数量**：2-8张  
**提示词示例**：`"将这些元素融合成一个和谐的场景"`

### 2. **图生图 (Image2Image)**
**用途**：基于参考图生成新图  
**适用场景**：风格转换、内容变化  
**图片数量**：1张主图  
**提示词示例**：`"将这张照片转换成油画风格"`

### 3. **局部重绘 (Inpainting)**
**用途**：修复或替换图片局部区域  
**适用场景**：瑕疵修复、内容替换  
**图片数量**：1张图 + 1张遮罩  
**提示词示例**：`"将选中区域替换为蓝天白云"`

### 4. **扩展图像 (Outpainting)**
**用途**：扩展图片边界，生成新内容  
**适用场景**：画面延伸、背景扩展  
**图片数量**：1张  
**提示词示例**：`"向右扩展画面，添加森林背景"`

### 5. **风格参考 (StyleReference)**
**用途**：提取风格应用到新内容  
**适用场景**：风格迁移  
**图片数量**：1张风格图  
**提示词示例**：`"使用这个风格绘制一只猫"`

### 6. **相似图生成 (VariationImage)**
**用途**：生成相似但不同的变体  
**适用场景**：设计迭代、多方案探索  
**图片数量**：1张参考图  
**提示词示例**：`"保持风格，变换构图"`

### 7. **图像混合 (ImageBlend)**
**用途**：精确控制多图混合比例  
**适用场景**：艺术创作、图像融合  
**图片数量**：2-4张  
**提示词示例**：`"自然融合这些图片"`

### 8. **创意填充 (CreativeFill)**
**用途**：智能填充缺失区域  
**适用场景**：内容补全、创意延伸  
**图片数量**：1张  
**提示词示例**：`"智能填充空白区域"`

## 🎛️ 参数详解

### 编辑强度 (edit_strength)
控制编辑的激进程度：
- **0.2-0.4**：微调，保留原图大部分特征
- **0.5-0.7**：中等修改，平衡原图与新内容
- **0.8-1.0**：大幅改变，更接近提示词描述

### 混合模式 (blend_mode)
| 模式 | 说明 | 适用场景 |
|------|------|----------|
| **智能混合** | AI自动决定混合方式 | 通用场景 |
| **平均混合** | 各图片均等权重 | 风格融合 |
| **主图优先** | 以主图为主，其他为辅 | 内容保留 |
| **渐变融合** | 图片间平滑过渡 | 艺术创作 |

### 处理顺序 (process_order)
| 顺序 | 说明 | 适用场景 |
|------|------|----------|
| **顺序处理** | 按1→2→3顺序叠加 | 分层编辑 |
| **并行处理** | 同时处理所有图片 | 快速预览 |
| **权重处理** | 根据重要性排序 | 精细控制 |

### 主图指定 (main_image_index)
在多图编辑时，指定哪张图片作为主要参考：
- 输入 `1` 表示使用 `image_main`
- 输入 `2` 表示使用 `image_2`
- 以此类推...

## 💡 使用技巧

### 1. 即梦模式最佳实践
```
场景：合成一个"赛博朋克城市夜景"
- image_main：现代城市照片
- image_2：霓虹灯效果图
- image_3：未来科技元素
- 提示词："融合成赛博朋克风格的夜景城市"
- 混合模式：智能混合
- 编辑强度：0.7
```

### 2. 图生图模式最佳实践
```
场景：照片转油画
- image_main：原始照片
- 提示词："转换为印象派油画风格"
- 编辑强度：0.8（高强度转换）
- steps：30（高质量）
```

### 3. 局部重绘最佳实践
```
场景：修复照片瑕疵
- image_main：原始照片
- image_2：黑白遮罩（白色=修改区域）
- 提示词："修复并美化这个区域"
- 编辑强度：0.6（适中）
```

### 4. 批量生成技巧
```
设置：
- batch_count：4
- seed_control：递增
- edit_strength：0.65

效果：一次生成4个渐进变化的版本
```

## 🔄 工作流示例

### 示例1：人像风格迁移
1. 加载人像照片到 `image_main`
2. 加载艺术风格图到 `image_2`
3. 模式选择：`风格参考`
4. 提示词：`"保持人物特征，应用艺术风格"`
5. 编辑强度：`0.7`
6. 批量生成：`4张`

### 示例2：场景扩展
1. 加载原图到 `image_main`
2. 模式选择：`扩展图像`
3. 提示词：`"向右扩展50%，添加山脉背景"`
4. 编辑强度：`0.75`
5. 种子控制：`固定`（便于微调）

## ⚠️ 注意事项

1. **图片顺序**：
   - `image_main` 始终是第一张图
   - 附加图片按 `image_2` 到 `image_8` 顺序添加

2. **遮罩要求**：
   - 局部重绘模式需要黑白遮罩
   - 白色 = 编辑区域
   - 黑色 = 保留区域

3. **性能考虑**：
   - 多图处理时间较长（30-90秒）
   - 批量生成会成倍增加时间
   - 建议先单图测试，满意后再批量

4. **编辑强度建议**：
   - 从 0.5 开始测试
   - 逐步调整到理想效果
   - 不同模式最佳值不同

5. **API 限制**：
   - 单次最多8张图片
   - 批量生成最多4张
   - 注意 API 额度消耗

## 🔧 配置文件

`config.json` 配置示例：

```json
{
    "api_key": "你的API密钥",
    "endpoint_id": "你的端点ID",
    "base_url": "https://ark.cn-beijing.volces.com/api/v3",
    "timeout": 180
}
```

## 📚 相关链接

- [火山引擎 Seedream 多图编辑文档](https://www.volcengine.com/docs/82379)
- [遮罩制作教程](#)

---

**作者**：@炮老师的小课堂  
**版本**：v3.1.1  
**更新日期**：2024年

